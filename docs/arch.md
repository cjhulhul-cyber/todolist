# TaskBox - 웹 애플리케이션 아키텍처

## 1. 시스템 개요

### 1.1 아키텍처 패턴
- **패턴**: 3-Tier Architecture (Presentation - Business Logic - Data)
- **스타일**: RESTful API 기반 Client-Server 모델
- **배포**: Single Page Application (SPA) + Node.js Backend

### 1.2 핵심 설계 원칙
- **단순성**: 최소한의 복잡도로 최대 효율성 달성
- **확장성**: 모듈화된 구조로 기능 확장 용이
- **성능**: 빠른 응답시간과 효율적인 리소스 사용
- **사용성**: 직관적이고 반응형 사용자 인터페이스

## 2. 전체 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│                        Client Layer                         │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │   Browser   │  │   Mobile    │  │      Tablet         │  │
│  │  (Desktop)  │  │   Safari    │  │     Chrome          │  │
│  │   Chrome    │  │   Chrome    │  │     Safari          │  │
│  └─────────────┘  └─────────────┘  └─────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
                              │
                         HTTP/HTTPS
                              │
┌─────────────────────────────────────────────────────────────┐
│                     Web Server Layer                       │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐ │
│  │              Express.js Server                          │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │ │
│  │  │   Static    │  │     API     │  │   Middleware    │ │ │
│  │  │   Files     │  │   Routes    │  │   (CORS, JSON)  │ │ │
│  │  │  Serving    │  │  Handler    │  │                 │ │ │
│  │  └─────────────┘  └─────────────┘  └─────────────────┘ │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                              │
                         File System
                              │
┌─────────────────────────────────────────────────────────────┐
│                      Data Layer                             │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                JSON File Storage                        │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │ │
│  │  │ todos.json  │  │   Backup    │  │   Temp Files    │ │ │
│  │  │  (Primary)  │  │   Files     │  │                 │ │ │
│  │  └─────────────┘  └─────────────┘  └─────────────────┘ │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 3. 프론트엔드 아키텍처

### 3.1 클라이언트 사이드 구조

```
┌─────────────────────────────────────────────────────────────┐
│                    Frontend Architecture                    │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                 Presentation Layer                      │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │ │
│  │  │    HTML5    │  │    CSS3     │  │   Font Awesome  │ │ │
│  │  │  Structure  │  │   Styling   │  │     Icons       │ │ │
│  │  │             │  │ (Dark/Light)│  │                 │ │ │
│  │  └─────────────┘  └─────────────┘  └─────────────────┘ │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                 Application Layer                       │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │ │
│  │  │   TodoApp   │  │    Event    │  │     State       │ │ │
│  │  │    Class    │  │  Handlers   │  │   Management    │ │ │
│  │  │             │  │             │  │                 │ │ │
│  │  └─────────────┘  └─────────────┘  └─────────────────┘ │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                   Service Layer                         │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │ │
│  │  │     API     │  │   Theme     │  │   Local Storage │ │ │
│  │  │   Client    │  │  Manager    │  │    Manager      │ │ │
│  │  │             │  │             │  │                 │ │ │
│  │  └─────────────┘  └─────────────┘  └─────────────────┘ │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 컴포넌트 구조

```
TodoApp (Main Controller)
├── UI Components
│   ├── Header
│   │   ├── Logo
│   │   └── ThemeToggle
│   ├── InputSection
│   │   ├── TodoInput
│   │   ├── PrioritySelect
│   │   └── AddButton
│   ├── FilterSection
│   │   ├── StatusFilters
│   │   ├── SearchInput
│   │   └── PriorityFilters
│   ├── TodosList
│   │   ├── TodoItem[]
│   │   │   ├── Checkbox
│   │   │   ├── TodoText
│   │   │   ├── PriorityIndicator
│   │   │   └── ActionButtons
│   │   └── EmptyState
│   └── Modal
│       ├── EditForm
│       └── ModalControls
├── Services
│   ├── APIService
│   ├── ThemeService
│   └── StorageService
└── Utils
    ├── EventHandlers
    ├── DataFilters
    └── Validators
```

## 4. 백엔드 아키텍처

### 4.1 서버 사이드 구조

```
┌─────────────────────────────────────────────────────────────┐
│                    Backend Architecture                     │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                   API Layer                             │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │ │
│  │  │   Routes    │  │ Middleware  │  │   Controllers   │ │ │
│  │  │ (/api/todos)│  │(CORS, JSON) │  │   (CRUD Ops)    │ │ │
│  │  └─────────────┘  └─────────────┘  └─────────────────┘ │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                 Business Logic Layer                    │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │ │
│  │  │    Todo     │  │ Validation  │  │     Error       │ │ │
│  │  │   Service   │  │   Logic     │  │   Handling      │ │ │
│  │  └─────────────┘  └─────────────┘  └─────────────────┘ │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                   Data Access Layer                     │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │ │
│  │  │    File     │  │   Backup    │  │     Data        │ │ │
│  │  │   Manager   │  │   Manager   │  │   Validator     │ │ │
│  │  └─────────────┘  └─────────────┘  └─────────────────┘ │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 API 엔드포인트 설계

```
RESTful API Structure:

GET    /api/todos          - 모든 할 일 조회
POST   /api/todos          - 새 할 일 생성
PUT    /api/todos/:id      - 특정 할 일 수정
DELETE /api/todos/:id      - 특정 할 일 삭제

Static Files:
GET    /                   - index.html 제공
GET    /styles.css         - CSS 파일 제공
GET    /script.js          - JavaScript 파일 제공
GET    /assets/*           - 정적 자원 제공
```

## 5. 데이터 아키텍처

### 5.1 데이터 모델

```javascript
// Todo 데이터 구조
{
  "id": "string",           // 고유 식별자 (timestamp)
  "text": "string",         // 할 일 내용 (최대 200자)
  "completed": "boolean",   // 완료 상태
  "priority": "string",     // 우선순위 (high/medium/low)
  "createdAt": "ISO Date",  // 생성 시간
  "updatedAt": "ISO Date"   // 수정 시간
}

// 전체 데이터 구조
{
  "todos": [
    { /* Todo Object */ },
    { /* Todo Object */ }
  ],
  "metadata": {
    "version": "1.0",
    "lastModified": "ISO Date",
    "totalCount": "number"
  }
}
```

### 5.2 데이터 플로우

```
┌─────────────┐    HTTP Request     ┌─────────────┐
│   Client    │ ──────────────────> │   Server    │
│             │                     │             │
│  ┌───────┐  │                     │ ┌───────────┐│
│  │ State │  │                     │ │ Controller││
│  └───────┘  │                     │ └───────────┘│
│             │                     │      │       │
│             │                     │      ▼       │
│             │                     │ ┌───────────┐│
│             │                     │ │  Service  ││
│             │                     │ └───────────┘│
│             │                     │      │       │
│             │                     │      ▼       │
│             │                     │ ┌───────────┐│
│             │    HTTP Response    │ │File System││
│             │ <────────────────── │ └───────────┘│
└─────────────┘                     └─────────────┘
```

## 6. 보안 아키텍처

### 6.1 보안 계층

```
┌─────────────────────────────────────────────────────────────┐
│                    Security Layers                          │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                 Transport Security                      │ │
│  │  • HTTPS (Production 환경)                             │ │
│  │  • CORS 정책 설정                                       │ │
│  │  • Request Rate Limiting                               │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                Application Security                     │ │
│  │  • Input Validation & Sanitization                    │ │
│  │  • XSS Protection (HTML Escaping)                     │ │
│  │  • Error Handling (정보 노출 방지)                      │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                   Data Security                         │ │
│  │  • File System 권한 제어                               │ │
│  │  • JSON 데이터 검증                                     │ │
│  │  • 백업 파일 보호                                       │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 6.2 보안 정책

- **입력 검증**: 모든 사용자 입력에 대한 서버 사이드 검증
- **출력 인코딩**: HTML 출력 시 XSS 방지를 위한 이스케이핑
- **파일 접근**: 데이터 파일에 대한 적절한 권한 설정
- **오류 처리**: 시스템 정보 노출을 방지하는 일반적 오류 메시지

## 7. 성능 아키텍처

### 7.1 성능 최적화 전략

```
┌─────────────────────────────────────────────────────────────┐
│                Performance Optimization                     │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                  Frontend Performance                   │ │
│  │  • DOM 조작 최소화 (Virtual DOM 패턴)                   │ │
│  │  • CSS 애니메이션 하드웨어 가속                          │ │
│  │  • 이미지 최적화 (WebP, 적절한 크기)                    │ │
│  │  • JavaScript 번들 최적화                              │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                  Backend Performance                    │ │
│  │  • 비동기 파일 I/O 처리                                │ │
│  │  • JSON 파싱 최적화                                     │ │
│  │  • 메모리 사용량 모니터링                               │ │
│  │  • 응답 시간 최적화 (<100ms)                           │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │                   Caching Strategy                      │ │
│  │  • 브라우저 캐싱 (정적 자원)                            │ │
│  │  • 메모리 캐싱 (할 일 데이터)                           │ │
│  │  • LocalStorage (테마 설정)                            │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 7.2 성능 지표

- **초기 로딩 시간**: < 2초
- **API 응답 시간**: < 100ms
- **UI 반응 시간**: < 50ms
- **메모리 사용량**: < 50MB (브라우저)
- **파일 크기**: < 1MB (전체 앱)

## 8. 확장성 아키텍처

### 8.1 수평적 확장 계획

```
Current Architecture (Phase 1):
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   Client    │───▶│   Server    │───▶│    File     │
│             │    │             │    │   System    │
└─────────────┘    └─────────────┘    └─────────────┘

Future Architecture (Phase 2+):
┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   Client    │───▶│Load Balancer│───▶│  Server 1   │
│             │    │             │    │             │
└─────────────┘    └─────────────┘    └─────────────┘
                          │           ┌─────────────┐
                          └──────────▶│  Server 2   │
                                      │             │
                                      └─────────────┘
                                             │
                                      ┌─────────────┐
                                      │  Database   │
                                      │ (MongoDB)   │
                                      └─────────────┘
```

### 8.2 기능적 확장 계획

```
Phase 1 (Current): Basic Todo Management
├── CRUD Operations
├── Priority System
├── Search & Filter
└── Theme Support

Phase 2: Enhanced Features
├── Categories/Tags
├── Due Dates
├── Attachments
└── Collaboration

Phase 3: Advanced Features
├── Analytics Dashboard
├── API Integration
├── Mobile App
└── Cloud Sync
```

## 9. 배포 아키텍처

### 9.1 개발 환경

```
Development Environment:
┌─────────────────────────────────────────────────────────────┐
│                    Local Development                        │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │   VS Code   │  │   Node.js   │  │      Browser        │  │
│  │   Editor    │  │   Runtime   │  │   Dev Tools         │  │
│  └─────────────┘  └─────────────┘  └─────────────────────┘  │
│         │                │                    │             │
│         └────────────────┼────────────────────┘             │
│                          │                                  │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │   Nodemon   │  │     npm     │  │    File System      │  │
│  │ Auto-reload │  │   Manager   │  │   (Local Storage)   │  │
│  └─────────────┘  └─────────────┘  └─────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

### 9.2 프로덕션 환경

```
Production Environment:
┌─────────────────────────────────────────────────────────────┐
│                     Cloud Deployment                       │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │   Nginx     │  │   Node.js   │  │    File System      │  │
│  │ Web Server  │  │   Process   │  │   (Persistent)      │  │
│  └─────────────┘  └─────────────┘  └─────────────────────┘  │
│         │                │                    │             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │    SSL      │  │     PM2     │  │      Backup         │  │
│  │Certificate  │  │ Process Mgr │  │     System          │  │
│  └─────────────┘  └─────────────┘  └─────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

## 10. 모니터링 & 로깅

### 10.1 로깅 전략

```javascript
// 로그 레벨 정의
const LOG_LEVELS = {
  ERROR: 'error',    // 시스템 오류
  WARN: 'warn',      // 경고 사항
  INFO: 'info',      // 일반 정보
  DEBUG: 'debug'     // 디버그 정보
};

// 로그 카테고리
const LOG_CATEGORIES = {
  API: 'api',           // API 요청/응답
  FILE: 'file',         // 파일 시스템 작업
  AUTH: 'auth',         // 인증/권한
  PERF: 'performance'   // 성능 관련
};
```

### 10.2 모니터링 지표

- **시스템 지표**: CPU, 메모리, 디스크 사용량
- **애플리케이션 지표**: 응답 시간, 처리량, 오류율
- **사용자 지표**: 활성 사용자, 세션 시간, 기능 사용률
- **비즈니스 지표**: 할 일 생성률, 완료율, 사용 패턴

## 11. 기술적 의사결정

### 11.1 아키텍처 선택 근거

| 기술 | 선택 이유 | 대안 | 선택하지 않은 이유 |
|------|-----------|------|-------------------|
| Vanilla JS | 단순성, 빠른 로딩 | React, Vue | 복잡도 증가, 번들 크기 |
| Express.js | 가벼움, 유연성 | Fastify, Koa | 학습 곡선, 생태계 |
| JSON Files | 단순함, 설정 불필요 | MongoDB, SQLite | 복잡도, 의존성 |
| CSS Grid/Flexbox | 네이티브, 성능 | Bootstrap, Tailwind | 번들 크기, 커스터마이징 |

### 11.2 트레이드오프 분석

```
성능 vs 기능:
├── 선택: 성능 우선 (빠른 로딩, 반응성)
└── 트레이드오프: 일부 고급 기능 제한

단순성 vs 확장성:
├── 선택: 단순성 우선 (빠른 개발, 유지보수)
└── 트레이드오프: 향후 확장 시 리팩토링 필요

보안 vs 편의성:
├── 선택: 적절한 균형 (기본 보안 + 사용 편의성)
└── 트레이드오프: 엔터프라이즈급 보안 기능 부족
```

---

**문서 버전**: 1.0  
**작성일**: 2025-09-14  
**최종 수정일**: 2025-09-14  
**작성자**: TaskBox Development Team
